[{"/home/hadeaji/final/whats/chat/src/index.js":"1","/home/hadeaji/final/whats/chat/src/components/App.js":"2","/home/hadeaji/final/whats/chat/src/components/reducer.js":"3","/home/hadeaji/final/whats/chat/src/components/StateProvider.js":"4","/home/hadeaji/final/whats/chat/src/components/Account.js":"5","/home/hadeaji/final/whats/chat/src/components/Chat.js":"6","/home/hadeaji/final/whats/chat/src/components/Contacts.js":"7","/home/hadeaji/final/whats/chat/src/components/Login.js":"8","/home/hadeaji/final/whats/chat/src/components/Sidebar.js":"9","/home/hadeaji/final/whats/chat/src/firebase.js":"10","/home/hadeaji/final/whats/chat/src/components/ContactsCard.js":"11","/home/hadeaji/final/whats/chat/src/components/DirectMessages.js":"12","/home/hadeaji/final/whats/chat/src/components/SidebarChat.js":"13","/home/hadeaji/final/whats/chat/src/components/Dashboard/dashboard.js":"14","/home/hadeaji/final/whats/chat/src/components/Dashboard/styles.js":"15","/home/hadeaji/final/whats/chat/src/components/NewChat/newChat.js":"16","/home/hadeaji/final/whats/chat/src/components/ChatView/chatView.js":"17","/home/hadeaji/final/whats/chat/src/components/ChatTextBox/chatTextBox.js":"18","/home/hadeaji/final/whats/chat/src/components/ChatList/chatList.js":"19","/home/hadeaji/final/whats/chat/src/components/NewChat/styles.js":"20","/home/hadeaji/final/whats/chat/src/components/ChatView/styles.js":"21","/home/hadeaji/final/whats/chat/src/components/ChatTextBox/styles.js":"22","/home/hadeaji/final/whats/chat/src/components/ChatList/styles.js":"23"},{"size":523,"mtime":1612380911331,"results":"24","hashOfConfig":"25"},{"size":2209,"mtime":1612410215661,"results":"26","hashOfConfig":"25"},{"size":406,"mtime":1612375625471,"results":"27","hashOfConfig":"25"},{"size":376,"mtime":1612375625461,"results":"28","hashOfConfig":"25"},{"size":1843,"mtime":1612393910451,"results":"29","hashOfConfig":"25"},{"size":3924,"mtime":1612393910441,"results":"30","hashOfConfig":"25"},{"size":1138,"mtime":1612375625411,"results":"31","hashOfConfig":"25"},{"size":1746,"mtime":1612395163861,"results":"32","hashOfConfig":"25"},{"size":2368,"mtime":1612375625451,"results":"33","hashOfConfig":"25"},{"size":706,"mtime":1612392935851,"results":"34","hashOfConfig":"25"},{"size":1230,"mtime":1612375625411,"results":"35","hashOfConfig":"25"},{"size":1062,"mtime":1612375625411,"results":"36","hashOfConfig":"25"},{"size":954,"mtime":1612375625451,"results":"37","hashOfConfig":"25"},{"size":5674,"mtime":1612405114001,"results":"38","hashOfConfig":"25"},{"size":316,"mtime":1612394881781,"results":"39","hashOfConfig":"25"},{"size":3501,"mtime":1612394882191,"results":"40","hashOfConfig":"25"},{"size":1489,"mtime":1612394881841,"results":"41","hashOfConfig":"25"},{"size":1298,"mtime":1612394881871,"results":"42","hashOfConfig":"25"},{"size":4714,"mtime":1612394881911,"results":"43","hashOfConfig":"25"},{"size":839,"mtime":1612394882211,"results":"44","hashOfConfig":"25"},{"size":1202,"mtime":1612394881841,"results":"45","hashOfConfig":"25"},{"size":447,"mtime":1612394881871,"results":"46","hashOfConfig":"25"},{"size":481,"mtime":1612394881961,"results":"47","hashOfConfig":"25"},{"filePath":"48","messages":"49","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},"16fbl09",{"filePath":"51","messages":"52","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"53","messages":"54","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"55","messages":"56","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"57","messages":"58","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"59","usedDeprecatedRules":"50"},{"filePath":"60","messages":"61","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"62","usedDeprecatedRules":"50"},{"filePath":"63","messages":"64","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"65","usedDeprecatedRules":"50"},{"filePath":"66","messages":"67","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"68","usedDeprecatedRules":"50"},{"filePath":"69","messages":"70","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"71","usedDeprecatedRules":"50"},{"filePath":"72","messages":"73","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"74","usedDeprecatedRules":"50"},{"filePath":"75","messages":"76","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"77","usedDeprecatedRules":"50"},{"filePath":"78","messages":"79","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"80","usedDeprecatedRules":"50"},{"filePath":"81","messages":"82","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"83","messages":"84","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"85","usedDeprecatedRules":"50"},{"filePath":"86","messages":"87","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"88","messages":"89","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"90","messages":"91","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"92","messages":"93","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"94","messages":"95","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"96","messages":"97","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"98","messages":"99","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"100","messages":"101","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"102","messages":"103","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},"/home/hadeaji/final/whats/chat/src/index.js",[],["104","105"],"/home/hadeaji/final/whats/chat/src/components/App.js",["106","107"],"/home/hadeaji/final/whats/chat/src/components/reducer.js",[],"/home/hadeaji/final/whats/chat/src/components/StateProvider.js",[],"/home/hadeaji/final/whats/chat/src/components/Account.js",["108","109"],"import React, {useState , useEffect} from 'react'\nimport { useParams } from 'react-router-dom';\n\nimport db from '../firebase'\nimport '../css/Account.css'\nimport { useStateValue } from \"../components/StateProvider\";\n\nexport default function Account() {\n    const { accountId } = useParams();\n    const [{user}, dispatch ] = useStateValue();\n    const [ userDetails , setUserDetails ] = useState(\"\");\n\n\n    useEffect( () => {\n        const unsubscribe = db.collection('users').doc(accountId).onSnapshot((snapshot) => setUserDetails(snapshot.data()));\n      \n        return () => {\n            unsubscribe();\n        }\n    },[]);\n\n    // const formHandler = () =>{\n    //     db.collection('users').doc(user.uid).add({\n    //         email: user.email,\n    //         displayName: user.displayName,\n    //         photoURL: user.photoURL,\n    //     })\n    // }\n\n    return accountId?(\n        <div className='account'>\n            <div className='account__header'>\n                <img src={userDetails?.photoURL} alt='profile_picture' />\n                <h1>{userDetails.displayName}</h1>\n                \n            </div>\n            <div className='account__info'>\n                <h2>Account information: </h2>\n                <p><b>Email: </b>{userDetails.email}</p>\n                {/* <p><b>Last Login: </b>{user.metadata.lastSignInTime}</p> */}\n            </div>\n\n        </div>\n    ):(\n        <div className='account'>\n        <div className='account__header'>\n            <img src={user?.photoURL} alt='profile_picture' />\n            <h1>{user.displayName}</h1>\n            \n        </div>\n        <div className='account__info'>\n            <h2>Account information: </h2>\n            <p><b>Email: </b>{user.email}</p>\n            {/* <p><b>Last Login: </b>{user.metadata.lastSignInTime}</p> */}\n        </div>\n\n    </div>\n    )\n}","/home/hadeaji/final/whats/chat/src/components/Chat.js",["110","111","112"],"import React, {useState , useEffect, useRef} from 'react'\nimport { useParams } from 'react-router-dom';\nimport { Avatar , IconButton } from \"@material-ui/core\";\nimport AttachFileIcon from '@material-ui/icons/AttachFile';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport SendIcon from '@material-ui/icons/Send';\n\nimport db , {firebaseApp} from '../firebase'\nimport firebase from 'firebase'\nimport { useCollectionData } from 'react-firebase-hooks/firestore';\nimport '../css/Chat.css'\nimport { useStateValue } from \"../components/StateProvider\";\n\n\nexport default function Chat(){\n    const dummy = useRef();\n    const { roomId } = useParams();\n    const [ roomName , setRoomName ] = useState(\"\");\n    const [{user}, dispatch ] = useStateValue();\n    const messagesRef = db.collection('rooms').doc(roomId).collection('messages');\n    const query = messagesRef.orderBy('createdAt').limit(25);\n    const [messages] = useCollectionData(query, { idField: 'id' });\n    const [formValue, setFormValue] = useState('');\n  \n\n\n    useEffect(() =>{\n        if (roomId) {\n            db.collection('rooms').doc(roomId).onSnapshot((snapshot) =>\n                setRoomName(snapshot.data().name));\n        }\n    } , [roomId])\n    \n  \n    const sendMessage = async (e) => {\n        e.preventDefault();\n        const { email, displayName } = user;\n  \n        messagesRef.add({\n            text: formValue,\n            createdAt: firebase.firestore.FieldValue.serverTimestamp(),\n            email,\n            displayName\n        })\n  \n        setFormValue('');\n        dummy.current.scrollIntoView({ behavior: 'smooth' });\n    }\n\n    const attach = async (e) => {\n        e.preventDefault();\n        const file = e.target.files[0];\n        const storageRef = firebaseApp.ref()\n        const fileRef = storageRef.child(file.name)\n        fileRef.put(file)\n        const { email, displayName } = user;\n  \n        await messagesRef.add({\n            text: formValue,\n            createdAt: firebase.firestore.FieldValue.serverTimestamp(),\n            email,\n            displayName\n        })\n  \n        setFormValue('');\n        dummy.current.scrollIntoView({ behavior: 'smooth' });\n    }\n\n\n    return(\n        <div className='chat'>\n            <div className='chat__header'>\n                <Avatar />\n                <div className='chat__headerInfo'>\n                    <h3>{roomName}</h3>\n                    <p>Last seen</p>\n                </div>\n                <div className='chat__headerRight'>\n                    {/* <IconButton>\n                        <SearchOutlinedIcon />\n                    </IconButton> */}\n                    <IconButton>\n                        <AttachFileIcon onclick={attach} />\n                    </IconButton>  \n                    <IconButton>\n                        <MoreVertIcon />\n                    </IconButton> \n                </div>\n            </div>\n            <div className='chat__body'>\n                {messages && messages.map(msg => <ChatMessage key={msg.id} message={msg} />)}\n                <span ref={dummy}></span>\n            </div>   \n            <div className='chat__footer'>\n                <form>\n                    <input value={formValue} onChange={(e)=>setFormValue(e.target.value)} type='text' placeholder='Type a message' />\n                    <button type='submit' onClick={sendMessage}><SendIcon /></button>\n                </form>\n            </div>\n        </div>\n    );\n}\n\n  \n  function ChatMessage(props) {\n    const { text, createdAt, email, displayName } = props.message;\n    const [{user}, dispatch ] = useStateValue();\n\n    const messageClass = email === user.email ? 'chat__receiver' : 'false';\n    console.log(props.message)\n    return (<>\n      <div className={`chat__message ${messageClass}`}>\n            <span className='chat__name'>\n                {displayName}\n            </span>\n            {text}\n      </div>\n    </>)\n  }\n  \n","/home/hadeaji/final/whats/chat/src/components/Contacts.js",["113","114","115"],"import React, {useState,useEffect} from \"react\";\nimport '../css/Contacts.css'\nimport { useStateValue } from \"../components/StateProvider\";\nimport ContactsCard from '../components/ContactsCard'\nimport db from '../firebase'\nimport { Link } from 'react-router-dom'\n\nexport default function Contacts() {\n    const [{user}, dispatch ] = useStateValue();\n    const [ users , setUsers ] = useState([]);\n\n    useEffect( () => {\n        const unsubscribe = db.collection('users').onSnapshot(snapshot =>(\n            setUsers(snapshot.docs.map(doc =>({\n                id: doc.id,\n                data : doc.data()\n            })\n            ))\n        ));\n        return () => {\n            unsubscribe();\n        }\n    },[users]);\n    return(\n        <div className='contacts'>\n            <div className='contacts__header'>\n                <h1>Contacts</h1>\n            </div>\n            <div className='contacts__cards'>\n                <ContactsCard addNewContact/>\n                {users && users.map(userDetails =>(\n                    <ContactsCard userDetails={userDetails}/>\n                ))}\n            </div>\n        </div>\n    )\n}\n","/home/hadeaji/final/whats/chat/src/components/Login.js",["116","117"],"import React , {useEffect} from 'react'\nimport { Button } from '@material-ui/core'\nimport { auth , provider} from \"../firebase\";\n\nimport '../css/Login.css';\nimport { actionTypes } from './reducer';\nimport { useStateValue } from \"./StateProvider\"\n\nimport db from '../firebase'\n\n\nexport default function Login(){\n    const createUser = (uid,email, displayName, photoURL) => {\n        db.collection('users').doc(email).set({\n            uid: uid,\n            email: email,\n            displayName: displayName,\n            photoURL: photoURL,\n            friends: [],\n            messages: [],\n        }).then(() => {\n            console.log(\"Document successfully written!\");\n        }).catch((error) => {\n            console.error(\"Error writing document: \", error);\n        });\n    };\n\n    const [{} , dispatch ]  = useStateValue();\n\n    const signIn = () => {\n        auth\n            .signInWithPopup(provider)\n            .then((result) =>{\n                dispatch({\n                    type: actionTypes.SET_USER,\n                    user: result.user,\n                });\n                // if (db.collection('users').doc(result.user.email) == null || db.collection('users').doc(result.user.email) == undefined){\n                createUser(result.user.email,result.user.email, result.user.displayName, result.user.photoURL)\n                // }\n\n            })\n            .catch((error) => alert(error.message));\n    };\n    return(\n        <div className='login'>\n            <div className='login__container'>\n                <div className='login__text'>\n                    <h1>Sign into ChatiZone</h1>\n                </div>\n                <Button onClick={signIn}>Login with Google</Button>\n            </div>\n        </div>\n    );\n}","/home/hadeaji/final/whats/chat/src/components/Sidebar.js",["118","119","120","121"],"import React, { useState, useEffect } from \"react\";\nimport { Link } from 'react-router-dom'\nimport Tabs from 'react-bootstrap/Tabs'\nimport Tab from 'react-bootstrap/Tab'\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom'\nimport { Avatar, IconButton } from \"@material-ui/core\";\nimport ChatIcon from '@material-ui/icons/Chat';\nimport ContactsIcon from '@material-ui/icons/Contacts';\nimport GroupIcon from '@material-ui/icons/Group';\nimport '../css/Sidebar.css'\nimport SidebarChat from './SidebarChat'\nimport DirectMessages from './DirectMessages'\nimport { useStateValue } from \"../components/StateProvider\";\nimport db from '../firebase'\n\nexport default function Sidebar() {\n    const [rooms, setRooms] = useState([]);\n    const [{ user }, dispatch] = useStateValue();\n\n    useEffect(() => {\n        const unsubscribe = db.collection('rooms').onSnapshot(snapshot => (\n            setRooms(snapshot.docs.map(doc => ({\n                id: doc.id,\n                data: doc.data()\n            })\n            ))\n        ));\n        return () => {\n            unsubscribe();\n        }\n    }, []);\n    return (\n        <div className='sidebar'>\n            {/* <h1>sidebar</h1> */}\n            <div className='sidebar__header'>\n                <div className='sidebar__headerRight'>\n                    <Link to='/contacts'>\n                        <IconButton>\n                            <ContactsIcon />\n                        </IconButton>\n                    </Link>\n                </div>\n                < Link to={`/account/`}>\n                    <Avatar src={user?.photoURL} />\n                </ Link>\n            </div>\n            <Tabs  className='sidebar__headerRight' defaultActiveKey=\"profile\" id=\"uncontrolled-tab-example\" variant='pills' >\n                <Tab eventKey=\"chat\" title={<IconButton><GroupIcon /></IconButton>}>\n                    <div className='sidebar__chats'>\n\n                        <SidebarChat addNewChat />\n                        {rooms.map(room => (\n                            <SidebarChat key={room.id} id={room.id} name={room.data.name} />\n                        ))}\n\n                    </div>\n                </Tab>\n                <Tab eventKey=\"dm\" title={<IconButton><ChatIcon /></IconButton>}>\n                    <DirectMessages />\n                </Tab>\n            </Tabs>\n        </div>\n    )\n}\n","/home/hadeaji/final/whats/chat/src/firebase.js",["122"],"// For Firebase JS SDK v7.20.0 and later, measurementId is optional\nimport firebase from 'firebase'\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyChw1Ys1iEKxAWjjNJVgAPs7Agf2ttmkwI\",\n  authDomain: \"backup1-3da1f.firebaseapp.com\",\n  projectId: \"backup1-3da1f\",\n  storageBucket: \"backup1-3da1f.appspot.com\",\n  messagingSenderId: \"71694029692\",\n  appId: \"1:71694029692:web:95bd8fb14324f468ef4af9\",\n  measurementId: \"G-G17C8ESFE5\"\n};\n\nconst firebaseApp = firebase.initializeApp(firebaseConfig);\nconst db = firebaseApp.firestore();\nconst auth = firebase.auth();\nconst provider = new firebase.auth.GoogleAuthProvider();\nconst storage = firebase.storage()\n\nexport { auth , provider , firebaseApp};\nexport default db;\n","/home/hadeaji/final/whats/chat/src/components/ContactsCard.js",["123","124","125"],"import React, {useState,useEffect} from \"react\";\nimport { Avatar } from \"@material-ui/core\";\nimport { Link } from 'react-router-dom'\nimport PersonAddIcon from '@material-ui/icons/PersonAdd';\nimport db from '../firebase'\nimport '../css/Contacts.css'\n\nexport default function ContactsCard({id, name, addNewContact, userDetails}) {\n\n\n    const findFriend = () => {\n        const username = prompt(\"Search People\");\n        // temp = []\n        if(username) {\n            // database entries\n            // users.map(userDetails => (\n            //     {if (userDetails.displayName.includes(username)){\n            //         temp.append(userDetails);\n            //     }}\n            // ));\n        }\n    };\n\n    return !addNewContact ? (\n        <div  className='contactCard'> \n            < Link to={`/account/${userDetails.id}`}>\n                <Avatar src={userDetails.data.photoURL}/>\n                <div className='contactCard__info'>\n                    <h2>{userDetails.data.displayName}</h2>\n                </div>\n            </Link> \n        </div>\n    ) : (\n       <div onClick={findFriend} className='contactCard'>\n           <h2 className='find'><PersonAddIcon /> Find Friends</h2>\n           \n       </div> \n    )\n}","/home/hadeaji/final/whats/chat/src/components/DirectMessages.js",["126","127"],"import React, {useState,useEffect} from \"react\";\nimport { Avatar } from \"@material-ui/core\";\nimport { Link } from 'react-router-dom'\nimport db from '../firebase'\nimport '../css/DirectMessages.css'\nimport { useStateValue } from \"../components/StateProvider\";\n\nexport default function DirectMessages({id, name, addNewChat}) {\n    const [{user}, dispatch ] = useStateValue();\n    const [ users , setUsers ] = useState([]);\n\n    useEffect( () => {\n        const unsubscribe = db.collection('dm').onSnapshot(snapshot =>(\n            setUsers(snapshot.docs.map(doc =>({\n                id: doc.id,\n                data : doc.data()\n            })\n            ))\n        ));\n        return () => {\n            unsubscribe();\n        }\n    },[users]);\n    return(\n        < Link to={`/dm/${id}`}>\n            <div  className='directMessages'> \n                <Avatar />\n                <div className='directMessages__info'>\n                    <h2>{name}</h2>\n                    <p>DIRECT MESSAGES</p>\n                </div>\n            </div>\n        </Link>\n    )\n}","/home/hadeaji/final/whats/chat/src/components/SidebarChat.js",[],"/home/hadeaji/final/whats/chat/src/components/Dashboard/dashboard.js",["128"],"import React from 'react';\nimport NewChatComponent from '../NewChat/newChat';\nimport ChatListComponent from '../ChatList/chatList';\nimport ChatViewComponent from '../ChatView/chatView';\nimport ChatTextBoxComponent from '../ChatTextBox/chatTextBox';\nimport styles from './styles';\nimport { Button, withStyles } from '@material-ui/core';\nimport { firebase } from '@firebase/app';\n\n// I need to investigate why sometimes\n// two messages will send instead of just\n// one. I dont know if there are two instances\n// of the chat box component or what...\n\n// I will be using both .then and async/await\n// in this tutorial to give a feel of both.\n\nclass DashboardComponent extends React.Component {\n\n  constructor() {\n    super();\n    this.state = {\n      selectedChat: null,\n      newChatFormVisible: false,\n      email: null,\n      friends: [],\n      chats: []\n    };\n  }\n\n  render() {\n\n    const { classes } = this.props;\n\n    if(this.state.email) {\n      return(\n        <div className='dashboard-container' id='dashboard-container' style={{ display: 'flex',\n        backgroundcolor: 'whitesmoke',\n        position: 'absolute',\n        left: '110%',\n        marginRight: '30%',\n        height: '90vh',\n        width: '90%',\n        boxshadow: '-1px 4px 20px -6px black' }}>\n          <ChatListComponent history={this.props.history} \n            userEmail={this.state.email} \n            selectChatFn={this.selectChat} \n            chats={this.state.chats} \n            selectedChatIndex={this.state.selectedChat}\n            newChatBtnFn={this.newChatBtnClicked}>\n          </ChatListComponent>\n          {\n            this.state.newChatFormVisible ? null : <ChatViewComponent \n              user={this.state.email} \n              chat={this.state.chats[this.state.selectedChat]}>\n            </ChatViewComponent>\n          }\n          { \n            this.state.selectedChat !== null && !this.state.newChatFormVisible ? <ChatTextBoxComponent userClickedInputFn={this.messageRead} submitMessageFn={this.submitMessage}></ChatTextBoxComponent> : null \n          }\n          {\n            this.state.newChatFormVisible ? <NewChatComponent goToChatFn={this.goToChat} newChatSubmitFn={this.newChatSubmit}></NewChatComponent> : null\n          }\n          <Button onClick={this.signOut} className={classes.signOutBtn}>Sign Out</Button>\n        </div>\n      );\n    } else {\n      return(<div></div>);\n    }\n  }\n\n  signOut = () => {\n    firebase.auth().signOut();\n    window.location.reload(false);\n  }\n\n  submitMessage = (msg) => {\n    const docKey = this.buildDocKey(this.state.chats[this.state.selectedChat]\n      .users\n      .filter(_usr => _usr !== this.state.email)[0])\n    firebase\n      .firestore()\n      .collection('chats')\n      .doc(docKey)\n      .update({\n        messages: firebase.firestore.FieldValue.arrayUnion({\n          sender: this.state.email,\n          message: msg,\n          timestamp: Date.now()\n        }),\n        receiverHasRead: false\n      });\n  }\n\n  // Always in alphabetical order:\n  // 'user1:user2'\n  buildDocKey = (friend) => [this.state.email, friend].sort().join(':');\n\n  newChatBtnClicked = () => this.setState({ newChatFormVisible: true, selectedChat: null });\n\n  newChatSubmit = async (chatObj) => {\n    const docKey = this.buildDocKey(chatObj.sendTo);\n    await \n      firebase\n        .firestore()\n        .collection('chats')\n        .doc(docKey)\n        .set({\n          messages: [{\n            message: chatObj.message,\n            sender: this.state.email\n          }],\n          users: [this.state.email, chatObj.sendTo],\n          receiverHasRead: false\n        })\n    this.setState({ newChatFormVisible: false });\n    this.selectChat(this.state.chats.length - 1);\n  }\n\n  selectChat = async (chatIndex) => {\n    await this.setState({ selectedChat: chatIndex, newChatFormVisible: false });\n    this.messageRead();\n  }\n\n  goToChat = async (docKey, msg) => {\n    const usersInChat = docKey.split(':');\n    const chat = this.state.chats.find(_chat => usersInChat.every(_user => _chat.users.includes(_user)));\n    this.setState({ newChatFormVisible: false });\n    await this.selectChat(this.state.chats.indexOf(chat));\n    this.submitMessage(msg);\n  }\n\n  // Chat index could be different than the one we are currently on in the case\n  // that we are calling this function from within a loop such as the chatList.\n  // So we will set a default value and can overwrite it when necessary.\n  messageRead = () => {\n    const chatIndex = this.state.selectedChat;\n    const docKey = this.buildDocKey(this.state.chats[chatIndex].users.filter(_usr => _usr !== this.state.email)[0]);\n    if(this.clickedMessageWhereNotSender(chatIndex)) {\n      firebase\n        .firestore()\n        .collection('chats')\n        .doc(docKey)\n        .update({ receiverHasRead: true });\n    } else {\n      console.log('Clicked message where the user was the sender');\n    }\n  }\n\n  clickedMessageWhereNotSender = (chatIndex) => this.state.chats[chatIndex].messages[this.state.chats[chatIndex].messages.length - 1].sender !== this.state.email;\n\n  componentWillMount = () => {\n      firebase.auth().onAuthStateChanged(async _usr => {\n        if(!_usr)\n          var i =1+1;\n        else {\n          await firebase\n            .firestore()\n            .collection('chats')\n            .where('users', 'array-contains', _usr.email)\n            .onSnapshot(async res => {\n              const chats = res.docs.map(_doc => _doc.data());\n              await this.setState({\n                email: _usr.email,\n                chats: chats,\n                friends: []\n              });\n            })\n        }\n    });\n  }\n}\n\nexport default withStyles(styles)(DashboardComponent);","/home/hadeaji/final/whats/chat/src/components/Dashboard/styles.js",[],"/home/hadeaji/final/whats/chat/src/components/NewChat/newChat.js",[],"/home/hadeaji/final/whats/chat/src/components/ChatView/chatView.js",[],"/home/hadeaji/final/whats/chat/src/components/ChatTextBox/chatTextBox.js",[],"/home/hadeaji/final/whats/chat/src/components/ChatList/chatList.js",[],"/home/hadeaji/final/whats/chat/src/components/NewChat/styles.js",[],"/home/hadeaji/final/whats/chat/src/components/ChatView/styles.js",[],"/home/hadeaji/final/whats/chat/src/components/ChatTextBox/styles.js",[],"/home/hadeaji/final/whats/chat/src/components/ChatList/styles.js",[],{"ruleId":"129","replacedBy":"130"},{"ruleId":"131","replacedBy":"132"},{"ruleId":"133","severity":1,"message":"134","line":19,"column":9,"nodeType":"135","messageId":"136","endLine":19,"endColumn":15},{"ruleId":"133","severity":1,"message":"137","line":37,"column":18,"nodeType":"135","messageId":"136","endLine":37,"endColumn":26},{"ruleId":"133","severity":1,"message":"137","line":10,"column":20,"nodeType":"135","messageId":"136","endLine":10,"endColumn":28},{"ruleId":"138","severity":1,"message":"139","line":20,"column":7,"nodeType":"140","endLine":20,"endColumn":9,"suggestions":"141"},{"ruleId":"133","severity":1,"message":"137","line":19,"column":20,"nodeType":"135","messageId":"136","endLine":19,"endColumn":28},{"ruleId":"133","severity":1,"message":"142","line":106,"column":19,"nodeType":"135","messageId":"136","endLine":106,"endColumn":28},{"ruleId":"133","severity":1,"message":"137","line":107,"column":20,"nodeType":"135","messageId":"136","endLine":107,"endColumn":28},{"ruleId":"133","severity":1,"message":"143","line":6,"column":10,"nodeType":"135","messageId":"136","endLine":6,"endColumn":14},{"ruleId":"133","severity":1,"message":"144","line":9,"column":13,"nodeType":"135","messageId":"136","endLine":9,"endColumn":17},{"ruleId":"133","severity":1,"message":"137","line":9,"column":20,"nodeType":"135","messageId":"136","endLine":9,"endColumn":28},{"ruleId":"133","severity":1,"message":"145","line":1,"column":17,"nodeType":"135","messageId":"136","endLine":1,"endColumn":26},{"ruleId":"146","severity":1,"message":"147","line":28,"column":12,"nodeType":"148","messageId":"149","endLine":28,"endColumn":14},{"ruleId":"133","severity":1,"message":"150","line":5,"column":27,"nodeType":"135","messageId":"136","endLine":5,"endColumn":33},{"ruleId":"133","severity":1,"message":"151","line":5,"column":35,"nodeType":"135","messageId":"136","endLine":5,"endColumn":41},{"ruleId":"133","severity":1,"message":"152","line":5,"column":43,"nodeType":"135","messageId":"136","endLine":5,"endColumn":48},{"ruleId":"133","severity":1,"message":"137","line":18,"column":22,"nodeType":"135","messageId":"136","endLine":18,"endColumn":30},{"ruleId":"133","severity":1,"message":"153","line":18,"column":7,"nodeType":"135","messageId":"136","endLine":18,"endColumn":14},{"ruleId":"133","severity":1,"message":"154","line":1,"column":16,"nodeType":"135","messageId":"136","endLine":1,"endColumn":24},{"ruleId":"133","severity":1,"message":"145","line":1,"column":25,"nodeType":"135","messageId":"136","endLine":1,"endColumn":34},{"ruleId":"133","severity":1,"message":"155","line":5,"column":8,"nodeType":"135","messageId":"136","endLine":5,"endColumn":10},{"ruleId":"133","severity":1,"message":"144","line":9,"column":13,"nodeType":"135","messageId":"136","endLine":9,"endColumn":17},{"ruleId":"133","severity":1,"message":"137","line":9,"column":20,"nodeType":"135","messageId":"136","endLine":9,"endColumn":28},{"ruleId":"133","severity":1,"message":"156","line":155,"column":15,"nodeType":"135","messageId":"136","endLine":155,"endColumn":16},"no-native-reassign",["157"],"no-negated-in-lhs",["158"],"no-unused-vars","'slideR' is assigned a value but never used.","Identifier","unusedVar","'dispatch' is assigned a value but never used.","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'accountId'. Either include it or remove the dependency array.","ArrayExpression",["159"],"'createdAt' is assigned a value but never used.","'Link' is defined but never used.","'user' is assigned a value but never used.","'useEffect' is defined but never used.","no-empty-pattern","Unexpected empty object pattern.","ObjectPattern","unexpected","'Router' is defined but never used.","'Switch' is defined but never used.","'Route' is defined but never used.","'storage' is assigned a value but never used.","'useState' is defined but never used.","'db' is defined but never used.","'i' is assigned a value but never used.","no-global-assign","no-unsafe-negation",{"desc":"160","fix":"161"},"Update the dependencies array to be: [accountId]",{"range":"162","text":"163"},[622,624],"[accountId]"]